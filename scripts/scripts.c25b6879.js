!function(){"use strict";function a(a){a.when("/",{templateUrl:"views/search.html",controller:"SearchCtrl"}).when("/list",{templateUrl:"views/list.html",controller:"ListCtrl"}).when("/detail/:pid",{templateUrl:"views/detail.html",controller:"DetailCtrl"}).otherwise({redirectTo:"/"})}angular.module("uumaiApp",["ngRoute","ngAnimate","chart.js","brantwills.paging"]).config(a),a.$inject=["$routeProvider"]}(),angular.module("brantwills.paging",[]).directive("paging",function(){function a(a,b){a.List=[],a.Hide=!1,a.page=parseInt(a.page)||1,a.total=parseInt(a.total)||0,a.dots=a.dots||"...",a.ulClass=a.ulClass||"pagination",a.adjacent=parseInt(a.adjacent)||2,a.activeClass=a.activeClass||"active",a.disabledClass=a.disabledClass||"disabled",a.scrollTop=a.$eval(b.scrollTop),a.hideIfEmpty=a.$eval(b.hideIfEmpty),a.showPrevNext=a.$eval(b.showPrevNext)}function b(a,b){a.page>b&&(a.page=b),a.page<=0&&(a.page=1),a.adjacent<=0&&(a.adjacent=2),1>=b&&(a.Hide=a.hideIfEmpty)}function c(a,b){a.page!=b&&(a.page=b,a.pagingAction({page:b}),a.scrollTop&&scrollTo(0,0))}function d(a,b){if(a.showPrevNext&&!(1>b)){var d=a.page-1<=0,e=a.page-1<=0?1:a.page-1,f={value:"<<",title:"First Page",liClass:d?a.disabledClass:"",action:function(){d||c(a,1)}},g={value:"<",title:"Previous Page",liClass:d?a.disabledClass:"",action:function(){d||c(a,e)}};a.List.push(f),a.List.push(g)}}function e(a,b){if(a.showPrevNext&&!(1>b)){var d=a.page+1>b,e=a.page+1>=b?b:a.page+1,f={value:">>",title:"Last Page",liClass:d?a.disabledClass:"",action:function(){d||c(a,b)}},g={value:">",title:"Next Page",liClass:d?a.disabledClass:"",action:function(){d||c(a,e)}};a.List.push(g),a.List.push(f)}}function f(a,b,d){var e=0;for(e=a;b>=e;e++){var f={value:e,title:"Page "+e,liClass:d.page==e?d.activeClass:"",action:function(){c(d,this.value)}};d.List.push(f)}}function g(a){a.List.push({value:a.dots})}function h(a,b){f(1,2,a),3!=b&&g(a)}function i(a,b,c){c!=a-2&&g(b),f(a-1,a,b)}function j(c,g){if(c.pageSize&&!(c.pageSize<0)){a(c,g);var j,k=2*c.adjacent,l=Math.ceil(c.total/c.pageSize);if(b(c,l),d(c,l),5+k>l)j=1,f(j,l,c);else{var m;c.page<=1+k?(j=1,m=2+k+(c.adjacent-1),f(j,m,c),i(l,c,m)):l-k>c.page&&c.page>k?(j=c.page-c.adjacent,m=c.page+c.adjacent,h(c,j),f(j,m,c),i(l,c,m)):(j=l-(1+k+(c.adjacent-1)),m=l,h(c,j),f(j,m,c))}e(c,l)}}return{restrict:"EA",scope:{page:"=",pageSize:"=",total:"=",dots:"@",hideIfEmpty:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",scrollTop:"@",showPrevNext:"@",pagingAction:"&"},template:'<ul ng-hide="Hide" ng-class="ulClass"> <li title="{{Item.title}}" ng-class="Item.liClass" ng-click="Item.action()" ng-repeat="Item in List"> <span ng-bind="Item.value"></span> </ul>',link:function(a,b,c){a.$watchCollection("[page,total]",function(){j(a,c)})}}}),function(){"use strict";function a(a,b,c){b.goToList=function(){angular.isUndefined(b.searchWords)&&(b.searchWords=" "),a.searchWords=b.searchWords,c.path("/list")}}angular.module("uumaiApp").controller("SearchCtrl",a),a.$inject=["$rootScope","$scope","$location"]}(),function(){"use strict";function a(a,b){function c(){return a.get("data/detail"+b.pid+".json").success(function(a){return a.data})}return{getData:c}}angular.module("uumaiApp").factory("ItemDetail",a),a.$inject=["$http","$routeParams"]}(),function(){"use strict";function a(a,b,c){function d(d){b.get(d).success(function(b){a.goodBlocks=b,a.searchWords=b.searchWords,c.searchWords=a.searchWords,a.currentPage=b.currentPage,a.pageSize=b.pageSize,a.total=b.total,a.dots="...",a.adjacent=2,a.ulClass="pagination",a.activeClass="active",a.disabledClass="disabled",a.hideIfEmpty=!0,a.scrollTop=!0,a.showPrevNext=!1})}var e="data/list.json?searchWords="+c.searchWords;d(e),a.DoCtrlPagingAct=function(a,b,e){var f="data/list.json?searchWords="+c.searchWords+"&currentPage="+a+"&pageSize="+b+"&total="+e;d(f)},a.searchGoods=function(){c.searchWords=a.searchWords,d("data/list.json?searchWords="+c.searchWords)}}angular.module("uumaiApp").controller("ListCtrl",a),a.$inject=["$scope","$http","$rootScope"]}(),function(){"use strict";function a(a,b){a.item=b,b.getData().success(function(b){a.item=b})}angular.module("uumaiApp").controller("DetailCtrl",a),a.$inject=["$scope","ItemDetail"]}(),function(){function a(a,b){b.getData().success(function(b){a.labels=b.priceTrend.dates,a.data=[b.priceTrend.prices]})}angular.module("uumaiApp").controller("LineCtrl",a),a.$inject=["$scope","ItemDetail"]}();